(function(){"undefined"==typeof Spry&&(window.Spry={});Spry.Widget||(Spry.Widget={});Spry.Widget.BrowserSniff=function(){var a=navigator.userAgent.toString();this.mozilla=this.ie=this.opera=this.safari=!1;var b=/MSIE.([0-9\.]*)/i,c=/gecko/i,d=/(applewebkit|safari)\/([\d\.]*)/i,e=!1;(e=a.match(/Opera.([0-9\.]*)/i))?(this.opera=!0,this.version=parseFloat(e[1])):(e=a.match(b))?(this.ie=!0,this.version=parseFloat(e[1])):(e=a.match(d))?(this.safari=!0,this.version=parseFloat(e[2])):a.match(c)&&(e=a.match(/rv:\s*([0-9\.]+)/i),this.mozilla=!0,this.version=parseFloat(e[1]));this.windows=this.mac=this.linux=!1;this.Platform=a.match(/windows/i)?"windows":a.match(/linux/i)?"linux":a.match(/mac/i)?"mac":a.match(/unix/i)?"unix":"unknown";this[this.Platform]=!0;this.v=this.version;this.safari&&this.mac&&this.mozilla&&(this.mozilla=!1)};Spry.is=new Spry.Widget.BrowserSniff;Spry.Widget.ValidationTextField=function(a,b,c){b=Spry.Widget.Utils.firstValid(b,"none");"string"!=typeof b?this.showError("The second parameter in the constructor should be the validation type, the options are the third parameter."):"undefined"==typeof Spry.Widget.ValidationTextField.ValidationDescriptors[b]?this.showError("Unknown validation type received as the second parameter."):(c=Spry.Widget.Utils.firstValid(c,{}),this.type=b,this.isBrowserSupported()||(c.useCharacterMasking=!1),this.init(a,c),a=["submit"].concat(Spry.Widget.Utils.firstValid(this.options.validateOn,[])),a=a.join(","),this.validateOn=0,this.validateOn|=-1!=a.indexOf("submit")?Spry.Widget.ValidationTextField.ONSUBMIT:0,this.validateOn|=-1!=a.indexOf("blur")?Spry.Widget.ValidationTextField.ONBLUR:0,this.validateOn|=-1!=a.indexOf("change")?Spry.Widget.ValidationTextField.ONCHANGE:0,Spry.Widget.ValidationTextField.onloadDidFire?this.attachBehaviors():Spry.Widget.ValidationTextField.loadQueue.push(this))};Spry.Widget.ValidationTextField.ONCHANGE=1;Spry.Widget.ValidationTextField.ONBLUR=2;Spry.Widget.ValidationTextField.ONSUBMIT=4;Spry.Widget.ValidationTextField.ERROR_REQUIRED=1;Spry.Widget.ValidationTextField.ERROR_FORMAT=2;Spry.Widget.ValidationTextField.ERROR_RANGE_MIN=4;Spry.Widget.ValidationTextField.ERROR_RANGE_MAX=8;Spry.Widget.ValidationTextField.ERROR_CHARS_MIN=16;Spry.Widget.ValidationTextField.ERROR_CHARS_MAX=32;Spry.Widget.ValidationTextField.ValidationDescriptors={none:{},custom:{},integer:{characterMasking:/[\-\+\d]/,regExpFilter:/^[\-\+]?\d*$/,validation:function(a,b){if(""==a||"-"==a||"+"==a||!/^[\-\+]?\d*$/.test(a))return!1;b=b||{allowNegative:!1};var c=parseInt(a,10);if(isNaN(c))c=!1;else{var d=!0;"undefined"!=typeof b.allowNegative&&0==b.allowNegative&&(d=!1);!d&&0>a&&(c=!1)}return c}},real:{characterMasking:/[\d\.,\-\+e]/i,regExpFilter:/^[\-\+]?\d(?:|\.,\d{0,2})|(?:|e{0,1}[\-\+]?\d{0,})$/i,validation:function(a,b){if(!/^[\+\-]?[0-9]+([\.,][0-9]+)?([eE]{0,1}[\-\+]?[0-9]+)?$/.test(a))return!1;var c=parseFloat(a);isNaN(c)&&(c=!1);return c}},currency:{formats:{dot_comma:{characterMasking:/[\d\.\,\-\+\$]/,regExpFilter:/^[\-\+]?(?:[\d\.]*)+(|\,\d{0,2})$/,validation:function(a,b){var c=!1;if(/^(\-|\+)?\d{1,3}(?:\.\d{3})*(?:\,\d{2}|)$/.test(a)||/^(\-|\+)?\d+(?:\,\d{2}|)$/.test(a))a=a.toString().replace(/\./gi,"").replace(/\,/,"."),c=parseFloat(a);return c}},comma_dot:{characterMasking:/[\d\.\,\-\+\$]/,regExpFilter:/^[\-\+]?(?:[\d\,]*)+(|\.\d{0,2})$/,validation:function(a,b){var c=!1;if(/^(\-|\+)?\d{1,3}(?:\,\d{3})*(?:\.\d{2}|)$/.test(a)||/^(\-|\+)?\d+(?:\.\d{2}|)$/.test(a))a=a.toString().replace(/\,/gi,""),c=parseFloat(a);return c}}}},email:{characterMasking:/[^\s]/,validation:function(a,b){return/^[\w\.-]+@[\w\.-]+\.\w+$/i.test(a)}},date:{validation:function(a,b){var c=this.dateValidationPattern,d=b.format.match(/^([mdy]+)[\.\-\/\\\s]+([mdy]+)[\.\-\/\\\s]+([mdy]+)$/i),c=a.match(c);if(null!==d&&null!==c){for(var e=-1,f=-1,g=-1,h=1;h<d.length;h++)switch(d[h].toLowerCase()){case "dd":e=h;break;case "mm":f=h;break;case "yy":case "yyyy":g=h}if(-1!=e&&-1!=f&&-1!=g){d=-1;e=parseInt(c[e],10);f=parseInt(c[f],10);c=parseInt(c[g],10);if(1>f||12<f)return!1;switch(f){case 1:case 3:case 5:case 7:case 8:case 10:case 12:d=31;break;case 4:case 6:case 9:case 11:d=30;break;case 2:d=4*parseInt(c/4,10)!=c||0==c%100&&0!=c%400?28:29}return 1>e||e>d?!1:new Date(c,f-1,e)}}else return!1}},time:{validation:function(a,b){var c=b.format.match(/([hmst]+)/gi),d=a.match(/(\d+|AM?|PM?)/gi);if(null!==c&&null!==d){if(c.length!=d.length)return!1;for(var e=-1,f=-1,g=-1,h=-1,l=0,p=0,m=0,k="AM",n=0;n<c.length;n++)switch(c[n].toLowerCase()){case "hh":e=n;break;case "mm":f=n;break;case "ss":g=n;break;case "t":case "tt":h=n}return-1!=e&&(l=parseInt(d[e],10),isNaN(l)||l>("HH"==c[e]?23:12))||-1!=f&&(p=parseInt(d[f],10),isNaN(p)||59<p)||-1!=g&&(m=parseInt(d[g],10),isNaN(m)||59<m)||-1!=h&&(k=d[h].toUpperCase(),"TT"==c[h].toUpperCase()&&!/^a|pm$/i.test(k)||"T"==c[h].toUpperCase()&&!/^a|p$/i.test(k))?!1:new Date(2E3,0,1,l+("P"==k.charAt(0)?12:0),p,m)}return!1}},credit_card:{characterMasking:/\d/,validation:function(a,b){var c=null;b.format=b.format||"ALL";switch(b.format.toUpperCase()){case "ALL":c=/^[3-6]{1}[0-9]{12,18}$/;break;case "VISA":c=/^4(?:[0-9]{12}|[0-9]{15})$/;break;case "MASTERCARD":c=/^5[1-5]{1}[0-9]{14}$/;break;case "AMEX":c=/^3(4|7){1}[0-9]{13}$/;break;case "DISCOVER":c=/^6011[0-9]{12}$/;break;case "DINERSCLUB":c=/^3(?:(0[0-5]{1}[0-9]{11})|(6[0-9]{12})|(8[0-9]{12}))$/}if(!c.test(a))return!1;for(var c=[],d=1,e="",f=a.length-1;0<=f;f--)0==d%2?(e=2*parseInt(a.charAt(f),10),c[c.length]=e.toString().charAt(0),2==e.toString().length&&(c[c.length]=e.toString().charAt(1))):(e=a.charAt(f),c[c.length]=e),d++;for(f=d=0;f<c.length;f++)d+=parseInt(c[f],10);return 0==d%10?!0:!1}},zip_code:{formats:{zip_us9:{pattern:"00000-0000"},zip_us5:{pattern:"00000"},zip_uk:{characterMasking:/[\dA-Z\s]/,validation:function(a,b){return/^[A-Z]{1,2}\d[\dA-Z]?\s?\d[A-Z]{2}$/.test(a)}},zip_canada:{characterMasking:/[\dA-Z\s]/,pattern:"A0A 0A0"},zip_custom:{}}},phone_number:{formats:{phone_us:{pattern:"(000) 000-0000"},phone_custom:{}}},social_security_number:{pattern:"000-00-0000"},ip:{characterMaskingFormats:{ipv4:/[\d\.]/i,ipv6_ipv4:/[\d\.\:A-F\/]/i,ipv6:/[\d\.\:A-F\/]/i},validation:function(a,b){return Spry.Widget.ValidationTextField.validateIP(a,b.format)}},url:{characterMasking:/[^\s]/,validation:function(a,b){var c=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,d=a.match(c);if(d&&d[4]){for(var d=d[4].split("."),e="",f=0;f<d.length;f++)if(e=Spry.Widget.Utils.punycode_encode(d[f],64))e!=d[f]+"-"&&(d[f]="xn--"+e);else return!1;d=d.join(".");a=a.replace(c,"$1//"+d+"$5$6$8")}return(c=a.match(/^(?:https?|ftp)\:\/\/(?:(?:[a-z0-9\-\._~\!\$\&\'\(\)\*\+\,\;\=:]|%[0-9a-f]{2,2})*\@)?(?:((?:(?:[a-z0-9][a-z0-9\-]*[a-z0-9]|[a-z0-9])\.)*(?:[a-z][a-z0-9\-]*[a-z0-9]|[a-z])|(?:\[[^\]]*\]))(?:\:[0-9]*)?)(?:\/(?:[a-z0-9\-\._~\!\$\&\'\(\)\*\+\,\;\=\:\@]|%[0-9a-f]{2,2})*)*(?:\?(?:[a-z0-9\-\._~\!\$\&\'\(\)\*\+\,\;\=\:\@\/\?]|%[0-9a-f]{2,2})*)?(?:\#(?:[a-z0-9\-\._~\!\$\&\'\(\)\*\+\,\;\=\:\@\/\?]|%[0-9a-f]{2,2})*)?$/i))?(c=c[1])?"[]"==c?!1:"["==c.charAt(0)?(c=c.replace(/^\[|\]$/gi,""),Spry.Widget.ValidationTextField.validateIP(c,"ipv6_ipv4")):/[^0-9\.]/.test(c)?!0:Spry.Widget.ValidationTextField.validateIP(c,"ipv4"):!0:!1}}};Spry.Widget.ValidationTextField.validateIP=function(a,b){var c=[/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}(?:\/\d{1,3})?$/i,/^[a-f0-9]{0,4}::(?:\/\d{1,3})?$/i,/^:(?::[a-f0-9]{1,4}){1,6}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){1,6}:(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:)(?::[a-f0-9]{1,4}){1,6}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){2}(?::[a-f0-9]{1,4}){1,5}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){3}(?::[a-f0-9]{1,4}){1,4}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){4}(?::[a-f0-9]{1,4}){1,3}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){5}(?::[a-f0-9]{1,4}){1,2}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){6}(?::[a-f0-9]{1,4})(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){6}(?:\d{1,3}\.){3}\d{1,3}(?:\/\d{1,3})?$/i,/^:(?::[a-f0-9]{1,4}){0,4}:(?:\d{1,3}\.){3}\d{1,3}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){1,5}:(?:\d{1,3}\.){3}\d{1,3}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:)(?::[a-f0-9]{1,4}){1,4}:(?:\d{1,3}\.){3}\d{1,3}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){2}(?::[a-f0-9]{1,4}){1,3}:(?:\d{1,3}\.){3}\d{1,3}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){3}(?::[a-f0-9]{1,4}){1,2}:(?:\d{1,3}\.){3}\d{1,3}(?:\/\d{1,3})?$/i,/^(?:[a-f0-9]{1,4}:){4}(?::[a-f0-9]{1,4}):(?:\d{1,3}\.){3}\d{1,3}(?:\/\d{1,3})?$/i],d=[/^(\d{1,3}\.){3}\d{1,3}$/i],e=[];if("ipv6"==b||"ipv6_ipv4"==b)e=e.concat(c);if("ipv4"==b||"ipv6_ipv4"==b)e=e.concat(d);c=!1;for(d=0;d<e.length;d++)if(e[d].test(a)){c=!0;break}if(c&&-1!=a.indexOf(".")){d=a.match(/:?(?:\d{1,3}\.){3}\d{1,3}/i);if(!d)return!1;d=d[0].replace(/^:/,"");e=d.split(".");if(4!=e.length)return!1;for(var f=/^[\-\+]?\d*$/,d=0;d<e.length;d++){if(""==e[d])return!1;var g=parseInt(e[d],10);if(isNaN(g)||255<g||!f.test(e[d])||3<e[d].length||/^0{2,3}$/.test(e[d]))return!1}}if(c&&-1!=a.indexOf("/")){d=a.match(/\/\d{1,3}$/);if(!d)return!1;d=parseInt(d[0].replace(/^\//,""),10);if(isNaN(d)||128<d||1>d)return!1}return c};Spry.Widget.ValidationTextField.onloadDidFire=!1;Spry.Widget.ValidationTextField.loadQueue=[];Spry.Widget.ValidationTextField.prototype.isBrowserSupported=function(){return Spry.is.ie&&5<=Spry.is.v&&Spry.is.windows||Spry.is.mozilla&&1.4<=Spry.is.v||Spry.is.safari||Spry.is.opera&&9<=Spry.is.v};Spry.Widget.ValidationTextField.prototype.init=function(a,b){this.element=this.getElement(a);this.errors=0;this.flags={locked:!1,restoreSelection:!0};this.options={};this.event_handlers=[];this.validClass="textfieldValidState";this.focusClass="textfieldFocusState";this.requiredClass="textfieldRequiredState";this.hintClass="textfieldHintState";this.invalidFormatClass="textfieldInvalidFormatState";this.invalidRangeMinClass="textfieldMinValueState";this.invalidRangeMaxClass="textfieldMaxValueState";this.invalidCharsMinClass="textfieldMinCharsState";this.invalidCharsMaxClass="textfieldMaxCharsState";this.textfieldFlashTextClass="textfieldFlashText";Spry.is.safari&&(this.flags.lastKeyPressedTimeStamp=0);switch(this.type){case "phone_number":b.format=Spry.Widget.Utils.firstValid(b.format,"phone_us");break;case "currency":b.format=Spry.Widget.Utils.firstValid(b.format,"comma_dot");break;case "zip_code":b.format=Spry.Widget.Utils.firstValid(b.format,"zip_us5");break;case "date":b.format=Spry.Widget.Utils.firstValid(b.format,"mm/dd/yy");break;case "time":b.format=Spry.Widget.Utils.firstValid(b.format,"HH:mm");b.pattern=b.format.replace(/[hms]/gi,"0").replace(/TT/gi,"AM").replace(/T/gi,"A");break;case "ip":b.format=Spry.Widget.Utils.firstValid(b.format,"ipv4"),b.characterMasking=Spry.Widget.ValidationTextField.ValidationDescriptors[this.type].characterMaskingFormats[b.format]}var c={};b.format&&Spry.Widget.ValidationTextField.ValidationDescriptors[this.type].formats?Spry.Widget.ValidationTextField.ValidationDescriptors[this.type].formats[b.format]&&Spry.Widget.Utils.setOptions(c,Spry.Widget.ValidationTextField.ValidationDescriptors[this.type].formats[b.format]):Spry.Widget.Utils.setOptions(c,Spry.Widget.ValidationTextField.ValidationDescriptors[this.type]);b.useCharacterMasking=Spry.Widget.Utils.firstValid(b.useCharacterMasking,!1);b.hint=Spry.Widget.Utils.firstValid(b.hint,"");b.isRequired=Spry.Widget.Utils.firstValid(b.isRequired,!0);b.additionalError=Spry.Widget.Utils.firstValid(b.additionalError,!1);b.additionalError&&(b.additionalError=this.getElement(b.additionalError));b.characterMasking=Spry.Widget.Utils.firstValid(b.characterMasking,c.characterMasking);b.regExpFilter=Spry.Widget.Utils.firstValid(b.regExpFilter,c.regExpFilter);b.pattern=Spry.Widget.Utils.firstValid(b.pattern,c.pattern);b.validation=Spry.Widget.Utils.firstValid(b.validation,c.validation);"string"==typeof b.validation&&(b.validation=eval(b.validation));b.minValue=Spry.Widget.Utils.firstValid(b.minValue,c.minValue);b.maxValue=Spry.Widget.Utils.firstValid(b.maxValue,c.maxValue);b.minChars=Spry.Widget.Utils.firstValid(b.minChars,c.minChars);b.maxChars=Spry.Widget.Utils.firstValid(b.maxChars,c.maxChars);Spry.Widget.Utils.setOptions(this,b);Spry.Widget.Utils.setOptions(this.options,b)};Spry.Widget.ValidationTextField.prototype.destroy=function(){if(this.event_handlers)for(var a=0;a<this.event_handlers.length;a++)Spry.Widget.Utils.removeEventListener(this.event_handlers[a][0],this.event_handlers[a][1],this.event_handlers[a][2],!1);try{delete this.element}catch(d){}try{delete this.input}catch(d){}try{delete this.form}catch(d){}try{delete this.event_handlers}catch(d){}try{this.selection.destroy()}catch(d){}try{delete this.selection}catch(d){}for(var b=Spry.Widget.Form.onSubmitWidgetQueue,c=b.length,a=0;a<c;a++)if(b[a]==this){b.splice(a,1);break}};Spry.Widget.ValidationTextField.prototype.attachBehaviors=function(){this.element&&(this.input="INPUT"==this.element.nodeName?this.element:Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel(this.element,"INPUT"));if(this.input){this.maxChars&&this.input.removeAttribute("maxLength");this.putHint();this.compilePattern();"date"==this.type&&this.compileDatePattern();this.input.setAttribute("AutoComplete","off");this.selection=new Spry.Widget.SelectionDescriptor(this.input);this.oldValue=this.input.value;var a=this;this.event_handlers=[];this.event_handlers.push([this.input,"keydown",function(b){return a.isDisabled()?!0:a.onKeyDown(b||event)}]);this.event_handlers.push([this.input,"keypress",function(b){return a.isDisabled()?!0:a.onKeyPress(b||event)}]);Spry.is.opera&&this.event_handlers.push([this.input,"keyup",function(b){return a.isDisabled()?!0:a.onKeyUp(b||event)}]);this.event_handlers.push([this.input,"focus",function(b){return a.isDisabled()?!0:a.onFocus(b||event)}]);this.event_handlers.push([this.input,"blur",function(b){return a.isDisabled()?!0:a.onBlur(b||event)}]);this.event_handlers.push([this.input,"mousedown",function(b){return a.isDisabled()?!0:a.onMouseDown(b||event)}]);this.event_handlers.push([this.input,Spry.is.mozilla||Spry.is.opera||Spry.is.safari?"input":Spry.is.ie?"propertychange":"change",function(b){return a.isDisabled()?!0:a.onChange(b||event)}]);Spry.is.mozilla||Spry.is.safari?this.event_handlers.push([this.input,"dragdrop",function(b){if(a.isDisabled())return!0;a.removeHint();return a.onChange(b||event)}]):Spry.is.ie&&this.event_handlers.push([this.input,"drop",function(b){return a.isDisabled()?!0:a.onDrop(b||event)}]);for(var b=0;b<this.event_handlers.length;b++)Spry.Widget.Utils.addEventListener(this.event_handlers[b][0],this.event_handlers[b][1],this.event_handlers[b][2],!1);if(this.form=Spry.Widget.Utils.getFirstParentWithNodeName(this.input,"FORM"))this.form.attachedSubmitHandler||this.form.onsubmit||(this.form.onsubmit=function(a){a=a||event;return Spry.Widget.Form.onSubmit(a,a.srcElement||a.currentTarget)},this.form.attachedSubmitHandler=!0),this.form.attachedResetHandler||(Spry.Widget.Utils.addEventListener(this.form,"reset",function(a){a=a||event;return Spry.Widget.Form.onReset(a,a.srcElement||a.currentTarget)},!1),this.form.attachedResetHandler=!0),Spry.Widget.Form.onSubmitWidgetQueue.push(this)}};Spry.Widget.ValidationTextField.prototype.isDisabled=function(){return this.input&&(this.input.disabled||this.input.readOnly)||!this.input};Spry.Widget.ValidationTextField.prototype.getElement=function(a){return a&&"string"==typeof a?document.getElementById(a):a};Spry.Widget.ValidationTextField.addLoadListener=function(a){"undefined"!=typeof window.addEventListener?window.addEventListener("load",a,!1):"undefined"!=typeof document.addEventListener?document.addEventListener("load",a,!1):"undefined"!=typeof window.attachEvent&&window.attachEvent("onload",a)};Spry.Widget.ValidationTextField.processLoadQueue=function(a){Spry.Widget.ValidationTextField.onloadDidFire=!0;a=Spry.Widget.ValidationTextField.loadQueue;for(var b=a.length,c=0;c<b;c++)a[c].attachBehaviors()};Spry.Widget.ValidationTextField.addLoadListener(Spry.Widget.ValidationTextField.processLoadQueue);Spry.Widget.ValidationTextField.addLoadListener(function(){Spry.Widget.Utils.addEventListener(window,"unload",Spry.Widget.Form.destroyAll,!1)});Spry.Widget.ValidationTextField.prototype.setValue=function(a){this.flags.locked=!0;this.input.value=a;this.flags.locked=!1;this.oldValue=a;if(!Spry.is.ie)this.onChange()};Spry.Widget.ValidationTextField.prototype.saveState=function(){this.oldValue=this.input.value;this.selection.update()};Spry.Widget.ValidationTextField.prototype.revertState=function(a){a!=this.input.value&&(this.input.readOnly=!0,this.input.value=a,this.input.readOnly=!1,Spry.is.safari&&this.flags.active&&this.input.focus());this.flags.restoreSelection&&this.selection.moveTo(this.selection.start,this.selection.end);this.redTextFlash()};Spry.Widget.ValidationTextField.prototype.removeHint=function(){this.flags.hintOn&&(this.input.value="",this.flags.hintOn=!1,this.removeClassName(this.element,this.hintClass),this.removeClassName(this.additionalError,this.hintClass))};Spry.Widget.ValidationTextField.prototype.putHint=function(){this.hint&&this.input&&"text"==this.input.type&&""==this.input.value&&(this.flags.hintOn=!0,this.input.value=this.hint,this.addClassName(this.element,this.hintClass),this.addClassName(this.additionalError,this.hintClass))};Spry.Widget.ValidationTextField.prototype.redTextFlash=function(){var a=this;this.addClassName(this.element,this.textfieldFlashTextClass);setTimeout(function(){a.removeClassName(a.element,a.textfieldFlashTextClass)},100)};Spry.Widget.ValidationTextField.prototype.doValidations=function(a,b){if(this.isDisabled()||this.flags.locked)return!1;if(0==a.length&&!this.isRequired)return this.errors=0,!1;this.flags.locked=!0;var c=!1,d=!0;this.options.isRequired||0!=a.length||(d=!1);var e=0,f=a;if(this.useCharacterMasking&&this.characterMasking)for(var g=0;g<a.length;g++)if(!this.characterMasking.test(a.charAt(g))){e|=Spry.Widget.ValidationTextField.ERROR_FORMAT;f=b;c=!0;break}!c&&this.useCharacterMasking&&this.regExpFilter&&!this.regExpFilter.test(f)&&(e|=Spry.Widget.ValidationTextField.ERROR_FORMAT,c=!0);!c&&this.pattern&&(this.patternToRegExp(a.length).test(a)?this.patternLength!=a.length&&(e|=Spry.Widget.ValidationTextField.ERROR_FORMAT):(e|=Spry.Widget.ValidationTextField.ERROR_FORMAT,c=!0));""==f&&(e|=Spry.Widget.ValidationTextField.ERROR_REQUIRED);!c&&this.pattern&&this.useCharacterMasking&&(g=this.getAutoComplete(a.length))&&(f+=g);!c&&null!==this.minChars&&d&&a.length<this.minChars&&(e|=Spry.Widget.ValidationTextField.ERROR_CHARS_MIN,d=!1);!c&&null!==this.maxChars&&d&&a.length>this.maxChars&&(e|=Spry.Widget.ValidationTextField.ERROR_CHARS_MAX,d=!1);!c&&this.validation&&d&&(g=this.validation(f,this.options),!1===g?(e|=Spry.Widget.ValidationTextField.ERROR_FORMAT,d=!1):this.typedValue=g);!c&&this.validation&&null!==this.minValue&&d&&(g=this.validation(this.minValue.toString(),this.options),!1!==g&&this.typedValue<g&&(e|=Spry.Widget.ValidationTextField.ERROR_RANGE_MIN,d=!1));!c&&this.validation&&null!==this.maxValue&&d&&(d=this.validation(this.maxValue.toString(),this.options),!1!==d&&this.typedValue>d&&(e|=Spry.Widget.ValidationTextField.ERROR_RANGE_MAX));this.useCharacterMasking&&c&&this.revertState(b);this.errors=e;this.fixedValue=f;this.flags.locked=!1;return c};Spry.Widget.ValidationTextField.prototype.onChange=function(a){if(Spry.is.opera&&this.flags.operaRevertOnKeyUp||Spry.is.ie&&a&&"value"!=a.propertyName)return!0;if(this.flags.drop){var b=this;setTimeout(function(){b.flags.drop=!1;b.onChange(null)},0)}else{if(this.flags.hintOn)return!0;if(8==this.keyCode||46==this.keyCode)if(a=this.doValidations(this.input.value,this.input.value),this.oldValue=this.input.value,(a||this.errors)&&this.validateOn&Spry.Widget.ValidationTextField.ONCHANGE)return b=this,setTimeout(function(){b.validate()},0),!0;a=this.doValidations(this.input.value,this.oldValue);(!a||this.errors)&&this.validateOn&Spry.Widget.ValidationTextField.ONCHANGE&&(b=this,setTimeout(function(){b.validate()},0));return!0}};Spry.Widget.ValidationTextField.prototype.onKeyUp=function(a){if(this.flags.operaRevertOnKeyUp)return this.setValue(this.oldValue),Spry.Widget.Utils.stopEvent(a),this.selection.moveTo(this.selection.start,this.selection.start),this.flags.operaRevertOnKeyUp=!1;this.flags.operaPasteOperation&&(window.clearInterval(this.flags.operaPasteOperation),this.flags.operaPasteOperation=null)};Spry.Widget.ValidationTextField.prototype.operaPasteMonitor=function(){if(this.input.value!=this.oldValue)if(this.doValidations(this.input.value,this.input.value))this.setValue(this.oldValue),this.selection.moveTo(this.selection.start,this.selection.start);else this.onChange()};Spry.Widget.ValidationTextField.prototype.compileDatePattern=function(){var a="",b=[],c=[],d=[],e=this.options.format.match(/^([mdy]+)([\.\-\/\\\s]+)([mdy]+)([\.\-\/\\\s]+)([mdy]+)$/i);if(null!==e)for(var f=1;f<e.length;f++)switch(e[f].toLowerCase()){case "dd":b[f-1]="\\d{1,2}";c[f-1]="\\d\\d";a+="("+b[f-1]+")";d[f-1]=null;break;case "mm":b[f-1]="\\d{1,2}";c[f-1]="\\d\\d";a+="("+b[f-1]+")";d[f-1]=null;break;case "yy":b[f-1]="\\d{1,2}";c[f-1]="\\d\\d";a+="(\\d\\d)";d[f-1]=null;break;case "yyyy":b[f-1]="\\d{1,4}";c[f-1]="\\d\\d\\d\\d";a+="(\\d\\d\\d\\d)";d[f-1]=null;break;default:b[f-1]=c[f-1]=Spry.Widget.ValidationTextField.regExpFromChars(e[f]),a+="["+b[f-1]+"]",d[f-1]=e[f]}this.dateValidationPattern=new RegExp("^"+a+"$","");this.dateAutocompleteCharacters=d;this.dateGroupPatterns=b;this.dateFullGroupPatterns=c;this.lastDateGroup=e.length-2};Spry.Widget.ValidationTextField.prototype.getRegExpForGroup=function(a){for(var b="^",c=0;c<=a;c++)b+=this.dateGroupPatterns[c];return new RegExp(b+"$","")};Spry.Widget.ValidationTextField.prototype.getRegExpForFullGroup=function(a){for(var b="^",c=0;c<a;c++)b+=this.dateGroupPatterns[c];b+=this.dateFullGroupPatterns[a];return new RegExp(b,"")};Spry.Widget.ValidationTextField.prototype.getDateGroup=function(a,b){if(0==b)return 0;for(var c=a.substring(0,b),d=0;d<=this.lastDateGroup;d++)if(this.getRegExpForGroup(d).test(c))return d;return-1};Spry.Widget.ValidationTextField.prototype.isDateGroupFull=function(a,b){return this.getRegExpForFullGroup(b).test(a)};Spry.Widget.ValidationTextField.prototype.isValueValid=function(a,b,c){a=a.substring(0,b);return this.getRegExpForGroup(c).test(a)};Spry.Widget.ValidationTextField.prototype.isPositionAtEndOfGroup=function(a,b,c){a=a.substring(0,b);return this.getRegExpForFullGroup(c).test(a)};Spry.Widget.ValidationTextField.prototype.nextDateDelimiterExists=function(a,b,c){c=this.dateAutocompleteCharacters[c+1];return a.length<b+c.length||a.substring(b,b+c.length)!=c?!1:!0};Spry.Widget.ValidationTextField.prototype.onKeyPress=function(a){if(this.flags.skp)return this.flags.skp=!1,Spry.Widget.Utils.stopEvent(a),!1;if(a.ctrlKey||a.metaKey||!this.useCharacterMasking)return!0;if(Spry.is.opera&&this.flags.operaRevertOnKeyUp)return Spry.Widget.Utils.stopEvent(a),!1;if((8==this.keyCode||46==this.keyCode)&&this.doValidations(this.input.value,this.input.value))return!0;var b=Spry.Widget.Utils.getCharacterFromEvent(a);if(b&&this.characterMasking&&!this.characterMasking.test(b))return Spry.Widget.Utils.stopEvent(a),this.redTextFlash(),!1;if(b&&this.pattern){var c=this.patternCharacters[this.selection.start];/[ax]/i.test(c)&&(b=c.toLowerCase()==c?b.toLowerCase():b.toUpperCase());c=this.getAutoComplete(this.selection.start);if(this.selection.start==this.oldValue.length)if(this.oldValue.length<this.patternLength){if(c)return Spry.Widget.Utils.stopEvent(a),a=this.oldValue.substring(0,this.selection.start)+c+b,(b=this.doValidations(a,this.oldValue))?(this.setValue(this.oldValue.substring(0,this.selection.start)+c),this.selection.moveTo(this.selection.start+c.length,this.selection.start+c.length)):(this.setValue(this.fixedValue),this.selection.moveTo(this.fixedValue.length,this.fixedValue.length)),!1}else return Spry.Widget.Utils.stopEvent(a),this.setValue(this.input.value),!1;else if(c)return Spry.Widget.Utils.stopEvent(a),this.selection.moveTo(this.selection.start+c.length,this.selection.start+c.length),!1;Spry.Widget.Utils.stopEvent(a);a=this.oldValue.substring(0,this.selection.start)+b+this.oldValue.substring(this.selection.start+1);(b=this.doValidations(a,this.oldValue))?this.selection.moveTo(this.selection.start,this.selection.start):(c=this.getAutoComplete(this.selection.start+1),this.setValue(this.fixedValue),this.selection.moveTo(this.selection.start+1+c.length,this.selection.start+1+c.length));return!1}if(b&&"date"==this.type&&this.useCharacterMasking){var d=this.getDateGroup(this.oldValue,this.selection.start);if(-1!=d)if(Spry.Widget.Utils.stopEvent(a),0!=d%2&&d++,this.isDateGroupFull(this.oldValue,d))if(this.isPositionAtEndOfGroup(this.oldValue,this.selection.start,d))if(d==this.lastDateGroup)this.redTextFlash();else if(this.nextDateDelimiterExists(this.oldValue,this.selection.start,d)){c=this.dateAutocompleteCharacters[d+1];this.selection.moveTo(this.selection.start+c.length,this.selection.start+c.length);if(b==c)return!1;a=this.isDateGroupFull(this.oldValue,d+2)?this.oldValue.substring(0,this.selection.start)+b+this.oldValue.substring(this.selection.start+1):this.oldValue.substring(0,this.selection.start)+b+this.oldValue.substring(this.selection.start);this.isValueValid(a,this.selection.start+1,d+2)?(this.setValue(a),this.selection.moveTo(this.selection.start+1,this.selection.start+1)):this.redTextFlash()}else c=this.dateAutocompleteCharacters[d+1],b=c+b,a=this.oldValue.substring(0,this.selection.start)+b+this.oldValue.substring(this.selection.start),this.isValueValid(a,this.selection.start+b.length,d+2)?(this.setValue(a),this.selection.moveTo(this.selection.start+b.length,this.selection.start+b.length)):(b=c,a=this.oldValue.substring(0,this.selection.start)+b+this.oldValue.substring(this.selection.start),this.setValue(a),this.selection.moveTo(this.selection.start+b.length,this.selection.start+b.length),this.redTextFlash());else{var e=1;a=this.oldValue.substring(0,this.selection.start)+b+this.oldValue.substring(this.selection.start+1);this.isValueValid(a,this.selection.start+1,d)?(this.isPositionAtEndOfGroup(a,this.selection.start+1,d)&&d!=this.lastDateGroup&&(this.nextDateDelimiterExists(a,this.selection.start+1,d)?c=this.dateAutocompleteCharacters[d+1]:(c=this.dateAutocompleteCharacters[d+1],a=this.oldValue.substring(0,this.selection.start)+b+c+this.oldValue.substring(this.selection.start+1)),e=1+c.length),this.setValue(a),this.selection.moveTo(this.selection.start+e,this.selection.start+e)):this.redTextFlash()}else a=this.oldValue.substring(0,this.selection.start)+b+this.oldValue.substring(this.selection.start),e=1,this.isValueValid(a,this.selection.start+1,d)||this.isValueValid(a,this.selection.start+1,d+1)?(c=this.dateAutocompleteCharacters[d+1],b==c?this.nextDateDelimiterExists(this.oldValue,this.selection.start,d)&&(a=this.oldValue,e=1):this.isPositionAtEndOfGroup(a,this.selection.start+1,d)&&d!=this.lastDateGroup&&(this.nextDateDelimiterExists(a,this.selection.start+1,d)?c=this.dateAutocompleteCharacters[d+1]:(c=this.dateAutocompleteCharacters[d+1],a=this.oldValue.substring(0,this.selection.start)+b+c+this.oldValue.substring(this.selection.start+1)),e=1+c.length),this.setValue(a),this.selection.moveTo(this.selection.start+e,this.selection.start+e)):this.redTextFlash();return!1}};Spry.Widget.ValidationTextField.prototype.onKeyDown=function(a){this.saveState();this.keyCode=a.keyCode;if(Spry.is.opera&&(this.flags.operaPasteOperation&&(window.clearInterval(this.flags.operaPasteOperation),this.flags.operaPasteOperation=null),a.ctrlKey)){var b=Spry.Widget.Utils.getCharacterFromEvent(a);if(b&&-1!="vx".indexOf(b.toLowerCase())){var c=this;this.flags.operaPasteOperation=window.setInterval(function(){c.operaPasteMonitor()},1);return!0}}if(8!=this.keyCode&&46!=this.keyCode&&Spry.Widget.Utils.isSpecialKey(a)||(8==this.keyCode||46==this.keyCode)&&this.doValidations(this.input.value,this.input.value))return!0;if(this.useCharacterMasking&&this.pattern&&46==this.keyCode){if(a.ctrlKey)this.setValue(this.input.value.substring(0,this.selection.start));else{if(this.selection.end==this.input.value.length||this.selection.start==this.input.value.length-1)return!0;this.flags.operaRevertOnKeyUp=!0}Spry.is.mozilla&&Spry.is.mac&&(this.flags.skp=!0);Spry.Widget.Utils.stopEvent(a);return!1}if(this.useCharacterMasking&&this.pattern&&!a.ctrlKey&&8==this.keyCode){if(this.selection.start==this.input.value.length)b=this.getAutoComplete(this.selection.start,-1),this.setValue(this.input.value.substring(0,this.input.value.length-(Spry.is.opera?0:1)-b.length)),Spry.is.opera&&(this.selection.start=this.selection.start-1-b.length,this.selection.end=this.selection.end-1-b.length);else{if(this.selection.end==this.input.value.length)return!0;this.flags.operaRevertOnKeyUp=!0}Spry.is.mozilla&&Spry.is.mac&&(this.flags.skp=!0);Spry.Widget.Utils.stopEvent(a);return!1}return!0};Spry.Widget.ValidationTextField.prototype.onMouseDown=function(a){this.flags.active&&this.saveState()};Spry.Widget.ValidationTextField.prototype.onDrop=function(a){this.flags.drop=!0;this.removeHint();this.saveState();this.flags.active=!0;this.addClassName(this.element,this.focusClass);this.addClassName(this.additionalError,this.focusClass)};Spry.Widget.ValidationTextField.prototype.onFocus=function(a){this.flags.drop||(this.removeHint(),this.pattern&&this.useCharacterMasking&&(a=this.getAutoComplete(this.selection.start),this.setValue(this.input.value+a),this.selection.moveTo(this.input.value.length,this.input.value.length)),this.saveState(),this.flags.active=!0,this.addClassName(this.element,this.focusClass),this.addClassName(this.additionalError,this.focusClass))};Spry.Widget.ValidationTextField.prototype.onBlur=function(a){this.flags.active=!1;this.removeClassName(this.element,this.focusClass);this.removeClassName(this.additionalError,this.focusClass);this.flags.restoreSelection=!1;this.doValidations(this.input.value,this.input.value);this.flags.restoreSelection=!0;this.validateOn&Spry.Widget.ValidationTextField.ONBLUR&&this.validate();var b=this;setTimeout(function(){b.putHint()},10);return!0};Spry.Widget.ValidationTextField.prototype.compilePattern=function(){if(this.pattern){for(var a=[],b=[],c=[],d=0,e="",f="",g=0;g<this.pattern.length;g++)e=this.pattern.charAt(g),"\\"==f?(/[0ABXY\?]/i.test(e)?b[d-1]=e:b[d-1]=Spry.Widget.ValidationTextField.regExpFromChars(e),a[d-1]=e,c[d-1]=null,f=""):(b[d]=Spry.Widget.ValidationTextField.regExpFromChars(e),/[0ABXY\?]/i.test(e)?(a[d]=null,c[d]=e):"\\"==e?(a[d]=e,c[d]="\\"):(a[d]=e,c[d]=null),d++,f=e);this.autoCompleteCharacters=a;this.compiledPattern=b;this.patternCharacters=c;this.patternLength=a.length}};Spry.Widget.ValidationTextField.prototype.getAutoComplete=function(a,b){if(-1==b){for(var c="",d="";a&&(c=this.getAutoComplete(--a));)d=c;return d}for(var d=c="",e=a;e<this.autoCompleteCharacters.length;e++)if(d=this.autoCompleteCharacters[e])c+=d;else break;return c};Spry.Widget.ValidationTextField.regExpFromChars=function(a){for(var b="",c="",d=0;d<a.length;d++)switch(c=a.charAt(d),c){case "0":b+="\\d";break;case "A":b+="[A-Z]";break;case "a":b+="[a-z]";break;case "B":case "b":b+="[a-zA-Z]";break;case "x":b+="[0-9a-z]";break;case "X":b+="[0-9A-Z]";break;case "Y":case "y":b+="[0-9a-zA-Z]";break;case "?":b+=".";break;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":b+=c;break;case "c":case "C":case "e":case "E":case "f":case "F":case "r":case "d":case "D":case "n":case "s":case "S":case "w":case "W":case "t":case "v":b+=c;break;default:b+="\\"+c}return b};Spry.Widget.ValidationTextField.prototype.patternToRegExp=function(a){var b="^";a=Math.min(this.compiledPattern.length,a);for(var c=0;c<a;c++)b+=this.compiledPattern[c];return b=new RegExp(b+"$","")};Spry.Widget.ValidationTextField.prototype.resetClasses=function(){for(var a=[this.requiredClass,this.invalidFormatClass,this.invalidRangeMinClass,this.invalidRangeMaxClass,this.invalidCharsMinClass,this.invalidCharsMaxClass,this.validClass],b=0;b<a.length;b++)this.removeClassName(this.element,a[b]),this.removeClassName(this.additionalError,a[b])};Spry.Widget.ValidationTextField.prototype.reset=function(){this.removeHint();this.oldValue=this.input.defaultValue;this.resetClasses();Spry.is.ie&&(this.input.forceFireFirstOnPropertyChange=!0,this.input.removeAttribute("forceFireFirstOnPropertyChange"));var a=this;setTimeout(function(){a.putHint()},10)};Spry.Widget.ValidationTextField.prototype.validate=function(){this.resetClasses();if(this.validateOn&Spry.Widget.ValidationTextField.ONSUBMIT&&(this.removeHint(),this.doValidations(this.input.value,this.input.value),!this.flags.active)){var a=this;setTimeout(function(){a.putHint()},10)}if(this.isRequired&&this.errors&Spry.Widget.ValidationTextField.ERROR_REQUIRED)return this.addClassName(this.element,this.requiredClass),this.addClassName(this.additionalError,this.requiredClass),!1;if(this.errors&Spry.Widget.ValidationTextField.ERROR_FORMAT)return this.addClassName(this.element,this.invalidFormatClass),this.addClassName(this.additionalError,this.invalidFormatClass),!1;if(this.errors&Spry.Widget.ValidationTextField.ERROR_RANGE_MIN)return this.addClassName(this.element,this.invalidRangeMinClass),this.addClassName(this.additionalError,this.invalidRangeMinClass),!1;if(this.errors&Spry.Widget.ValidationTextField.ERROR_RANGE_MAX)return this.addClassName(this.element,this.invalidRangeMaxClass),this.addClassName(this.additionalError,this.invalidRangeMaxClass),!1;if(this.errors&Spry.Widget.ValidationTextField.ERROR_CHARS_MIN)return this.addClassName(this.element,this.invalidCharsMinClass),this.addClassName(this.additionalError,this.invalidCharsMinClass),!1;if(this.errors&Spry.Widget.ValidationTextField.ERROR_CHARS_MAX)return this.addClassName(this.element,this.invalidCharsMaxClass),this.addClassName(this.additionalError,this.invalidCharsMaxClass),!1;this.addClassName(this.element,this.validClass);this.addClassName(this.additionalError,this.validClass);return!0};Spry.Widget.ValidationTextField.prototype.addClassName=function(a,b){!a||!b||a.className&&-1!=a.className.search(new RegExp("\\b"+b+"\\b"))||(a.className+=(a.className?" ":"")+b)};Spry.Widget.ValidationTextField.prototype.removeClassName=function(a,b){!a||!b||a.className&&-1==a.className.search(new RegExp("\\b"+b+"\\b"))||(a.className=a.className.replace(new RegExp("\\s*\\b"+b+"\\b","g"),""))};Spry.Widget.ValidationTextField.prototype.showError=function(a){alert("Spry.Widget.TextField ERR: "+a)};Spry.Widget.SelectionDescriptor=function(a){this.element=a;this.update()};Spry.Widget.SelectionDescriptor.prototype.update=function(){if(Spry.is.ie&&Spry.is.windows){var a=this.element.ownerDocument.selection;if("TEXTAREA"==this.element.nodeName){if("None"!=a.type){try{var b=a.createRange()}catch(d){return}if(b.parentElement()==this.element){a=this.element.ownerDocument.body.createTextRange();a.moveToElementText(this.element);for(var c=0;0>a.compareEndPoints("StartToStart",b);c++)a.moveStart("character",1);this.start=c;a=this.element.ownerDocument.body.createTextRange();a.moveToElementText(this.element);for(c=0;0>a.compareEndPoints("StartToEnd",b);c++)a.moveStart("character",1);this.end=c;this.length=this.end-this.start;this.text=b.text}}}else if("INPUT"==this.element.nodeName){try{this.range=a.createRange()}catch(d){return}this.length=this.range.text.length;b=this.range.duplicate();this.start=-b.moveStart("character",-1E4);b=this.range.duplicate();b.collapse(!1);this.end=-b.moveStart("character",-1E4);this.text=this.range.text}}else{b=this.element;c=a=0;try{a=b.selectionStart}catch(d){}try{c=b.selectionEnd}catch(d){}Spry.is.safari&&(2147483647==a&&(a=0),2147483647==c&&(c=0));this.start=a;this.end=c;this.length=c-a;this.text=this.element.value.substring(a,c)}};Spry.Widget.SelectionDescriptor.prototype.destroy=function(){try{delete this.range}catch(a){}try{delete this.element}catch(a){}};Spry.Widget.SelectionDescriptor.prototype.move=function(a){if(Spry.is.ie&&Spry.is.windows)this.range.move("character",a),this.range.select();else try{this.element.selectionStart++}catch(b){}this.update()};Spry.Widget.SelectionDescriptor.prototype.moveTo=function(a,b){if(Spry.is.ie&&Spry.is.windows){if("TEXTAREA"==this.element.nodeName){var c=this.element.createTextRange();this.range=this.element.createTextRange();this.range.move("character",a);this.range.moveEnd("character",b-a);0>this.range.compareEndPoints("StartToStart",c)&&this.range.setEndPoint("StartToStart",c);0<this.range.compareEndPoints("EndToEnd",c)&&this.range.setEndPoint("EndToEnd",c)}else"INPUT"==this.element.nodeName&&(this.range=this.element.ownerDocument.selection.createRange(),this.range.move("character",-1E4),this.start=this.range.moveStart("character",a),this.end=this.start+this.range.moveEnd("character",b-a));this.range.select()}else{this.start=a;try{this.element.selectionStart=a}catch(d){}this.end=b;try{this.element.selectionEnd=b}catch(d){}}this.ignore=!0;this.update()};Spry.Widget.SelectionDescriptor.prototype.moveEnd=function(a){if(Spry.is.ie&&Spry.is.windows)this.range.moveEnd("character",a),this.range.select();else try{this.element.selectionEnd++}catch(b){}this.update()};Spry.Widget.SelectionDescriptor.prototype.collapse=function(a){if(Spry.is.ie&&Spry.is.windows)this.range=this.element.ownerDocument.selection.createRange(),this.range.collapse(a),this.range.select();else if(a)try{this.element.selectionEnd=this.element.selectionStart}catch(b){}else try{this.element.selectionStart=this.element.selectionEnd}catch(b){}this.update()};Spry.Widget.Form||(Spry.Widget.Form={});Spry.Widget.Form.onSubmitWidgetQueue||(Spry.Widget.Form.onSubmitWidgetQueue=[]);Spry.Widget.Form.validate||(Spry.Widget.Form.validate=function(a){for(var b=!0,c=!0,d=Spry.Widget.Form.onSubmitWidgetQueue,e=d.length,f=0;f<e;f++)d[f].isDisabled()||d[f].form!=a||(b=(c=d[f].validate())&&b);return b});Spry.Widget.Form.onSubmit||(Spry.Widget.Form.onSubmit=function(a,b){return 0==Spry.Widget.Form.validate(b)?!1:!0});Spry.Widget.Form.onReset||(Spry.Widget.Form.onReset=function(a,b){for(var c=Spry.Widget.Form.onSubmitWidgetQueue,d=c.length,e=0;e<d;e++)c[e].isDisabled()||c[e].form!=b||"function"!=typeof c[e].reset||c[e].reset();return!0});Spry.Widget.Form.destroy||(Spry.Widget.Form.destroy=function(a){for(var b=Spry.Widget.Form.onSubmitWidgetQueue,c=0;c<Spry.Widget.Form.onSubmitWidgetQueue.length;c++)b[c].form==a&&"function"==typeof b[c].destroy&&(b[c].destroy(),c--)});Spry.Widget.Form.destroyAll||(Spry.Widget.Form.destroyAll=function(){for(var a=Spry.Widget.Form.onSubmitWidgetQueue,b=0;b<Spry.Widget.Form.onSubmitWidgetQueue.length;b++)"function"==typeof a[b].destroy&&(a[b].destroy(),b--)});Spry.Widget.Utils||(Spry.Widget.Utils={});Spry.Widget.Utils.punycode_constants={base:36,tmin:1,tmax:26,skew:38,damp:700,initial_bias:72,initial_n:128,delimiter:45,maxint:67108864};Spry.Widget.Utils.punycode_encode_digit=function(a){return String.fromCharCode(a+22+75*(26>a))};Spry.Widget.Utils.punycode_adapt=function(a,b,c){a=c?a/this.punycode_constants.damp:a>>1;a+=a/b;for(b=0;a>(this.punycode_constants.base-this.punycode_constants.tmin)*this.punycode_constants.tmax/2;b+=this.punycode_constants.base)a/=this.punycode_constants.base-this.punycode_constants.tmin;return b+(this.punycode_constants.base-this.punycode_constants.tmin+1)*a/(a+this.punycode_constants.skew)};Spry.Widget.Utils.punycode_encode=function(a,b){var c=a.split("");a=[];for(var d=0;d<c.length;d++)a.push(c[d].charCodeAt(0));var c="",e,f,g,h,l,p=a.length,m=this.punycode_constants.initial_n,k=0,n=this.punycode_constants.initial_bias,q=0;for(f=0;f<p;f++)if(128>a[f]){if(2>b-q)return!1;c+=String.fromCharCode(a[f]);q++}d=e=q;0<e&&(c+=String.fromCharCode(this.punycode_constants.delimiter),q++);for(;d<p;){g=this.punycode_constants.maxint;for(f=0;f<p;f++)a[f]>=m&&a[f]<g&&(g=a[f]);if(g-m>(this.punycode_constants.maxint-k)/(d+1))return!1;k+=(g-m)*(d+1);m=g;for(f=0;f<p;f++){if(a[f]<m&&0==++k)return!1;if(a[f]==m){g=k;for(h=this.punycode_constants.base;;h+=this.punycode_constants.base){if(q>=b)return!1;l=h<=n?this.punycode_constants.tmin:h>=n+this.punycode_constants.tmax?this.punycode_constants.tmax:h-n;if(g<l)break;c+=this.punycode_encode_digit(l+(g-l)%(this.punycode_constants.base-l));q++;g=(g-l)/(this.punycode_constants.base-l)}c+=this.punycode_encode_digit(g);q++;n=this.punycode_adapt(k,d+1,d==e);k=0;d++}}k++;m++}return c};Spry.Widget.Utils.setOptions=function(a,b,c){if(b)for(var d in b)c&&void 0==b[d]||(a[d]=b[d])};Spry.Widget.Utils.firstValid=function(){for(var a=null,b=0;b<Spry.Widget.Utils.firstValid.arguments.length;b++)if("undefined"!=typeof Spry.Widget.Utils.firstValid.arguments[b]){a=Spry.Widget.Utils.firstValid.arguments[b];break}return a};Spry.Widget.Utils.specialCharacters=",8,9,16,17,18,20,27,33,34,35,36,37,38,40,45,144,192,63232,";Spry.Widget.Utils.specialSafariNavKeys="63232,63233,63234,63235,63272,63273,63275,63276,63277,63289,";Spry.Widget.Utils.specialNotSafariCharacters="39,46,91,92,93,";Spry.Widget.Utils.specialCharacters+=Spry.Widget.Utils.specialSafariNavKeys;Spry.is.safari||(Spry.Widget.Utils.specialCharacters+=Spry.Widget.Utils.specialNotSafariCharacters);Spry.Widget.Utils.isSpecialKey=function(a){return-1!=Spry.Widget.Utils.specialCharacters.indexOf(","+a.keyCode+",")};Spry.Widget.Utils.getCharacterFromEvent=function(a){var b="keydown"==a.type,c=null,d=null;Spry.is.mozilla&&!b?a.charCode?d=String.fromCharCode(a.charCode):c=a.keyCode:(c=a.keyCode||a.which,13!=c&&(d=String.fromCharCode(c)));Spry.is.safari&&(b?(c=a.keyCode||a.which,d=String.fromCharCode(c)):(c=a.keyCode||a.which,d=-1!=Spry.Widget.Utils.specialCharacters.indexOf(","+c+",")?null:String.fromCharCode(c)));Spry.is.opera&&(d=-1!=Spry.Widget.Utils.specialCharacters.indexOf(","+c+",")?null:String.fromCharCode(c));return d};Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel=function(a,b){var c=a.getElementsByTagName(b);return c?c[0]:null};Spry.Widget.Utils.getFirstParentWithNodeName=function(a,b){for(;a.parentNode&&a.parentNode.nodeName.toLowerCase()!=b.toLowerCase()&&"BODY"!=a.parentNode.nodeName;)a=a.parentNode;return a.parentNode&&a.parentNode.nodeName.toLowerCase()==b.toLowerCase()?a.parentNode:null};Spry.Widget.Utils.destroyWidgets=function(a){"string"==typeof a&&(a=document.getElementById(a));for(var b=Spry.Widget.Form.onSubmitWidgetQueue,c=0;c<Spry.Widget.Form.onSubmitWidgetQueue.length;c++)"function"==typeof b[c].destroy&&Spry.Widget.Utils.contains(a,b[c].element)&&(b[c].destroy(),c--)};Spry.Widget.Utils.contains=function(a,b){if("object"==typeof a.contains)return b&&a&&(a==b||a.contains(b));for(var c=b;c;){if(c==a)return!0;c=c.parentNode}return!1};Spry.Widget.Utils.addEventListener=function(a,b,c,d){try{a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c,d)}catch(e){}};Spry.Widget.Utils.removeEventListener=function(a,b,c,d){try{a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c,d)}catch(e){}};Spry.Widget.Utils.stopEvent=function(a){try{this.stopPropagation(a),this.preventDefault(a)}catch(b){}};Spry.Widget.Utils.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};Spry.Widget.Utils.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1}})()